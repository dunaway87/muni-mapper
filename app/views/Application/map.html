<!DOCTYPE html>
  
<html>
<head>
  <link rel ="stylesheet" href="public/stylesheets/main.css"/>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.9.1.js"></script>
  <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js?"></script>
 <link rel="stylesheet" href="/public/stylesheets/leaflet-0.7.1.css" />
    <script src="/public/javascripts/muni-mapper.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.1.3"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.geom.js?2.1.3"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?2.1.3"></script>
        <script src="/public/javascripts/piecharts.js" type="text/javascript"></script>
            <script src="/public/javascripts/barcharts.js" type="text/javascript"></script>
    
 <script type="text/javascript">


$(document).ready(function (){

$('#layersTab').click(function(){
	$('#layerGroupContainer').toggle();
});
$('#searchTab').click(function(){
	$('.searchContainer').toggle();
});

var addresses;


$('#addressSearchButton').click(function(){
		console.log(addresses);
	 	var addressName = $('#address').val();
	 	console.log(addressName);
	 	for(var i = 0; i < addresses.length; i ++){
	 		
 			console.log('typed addess');
 			console.log(addressName);
 			console.log('address option');
 			console.log(addresses[i].address);
	 		
	 		if(addresses[i].address == addressName){

	 			changeAddress(addresses[i]);
	 		}
	 	}
	
	
});
	  
	  
	  

$.get("/getLayers").done(function(dataSTR){
	var data = jQuery.parseJSON(dataSTR);
 	console.log(data);
	var folderHtml ='';
 	for (var key in data) {
 		var folderName =key.replace(' ', '')+'Folder';
 			console.log(folderName);
 			folderHtml = folderHtml+'<li style="cursor:pointer" class="list-group-item"  onClick="$(\'#'+folderName+'\').toggle()">'+key+'</li><ul class="list-group" id="'+folderName+'"style="display:none; cursor:pointer">';
 			
 				
	 	  
	 	   var obj = data[key];
 	    for (var prop in obj) { 
			folderHtml = folderHtml+'<li id="'+obj[prop]+'"class="list-group-item" style = "margin-left:40px; cursor:pointer" onClick="manageLayer(\''+obj[prop]+'\')">'+obj[prop].replace(/_/g,' ')+'</li>';
 	      } 
 	    folderHtml = folderHtml+'</ul></li>';
 	   } 
 	
 	console.log(folderHtml);
 	$('#folderList').append(folderHtml);
 });


});
</script>


</head>
<body class = "mapFullPage">
<header>
	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Anchorage Municipal Maps</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
       <li><a href="#" id ="layersTab">
            	<span id ="layersTabLabel">Layers</span>
            	<span class ="glyphicon glyphicon-picture"></span>
           </a>
         </li>
            <li class="divider"></li>
         <li><a href="#" id ="searchTab">
            	<span id = "searchTabLabel">Search</span>
            	<span class = "glyphicon glyphicon-search"></span>
           </a>
      	 </li>
            <li class ="divider"></li>
            <li><a href="#" id="settingsTab">
           		 <span id ="settingsTabLabel">Settings</span>
            	 <span class="glyphicon glyphicon-cog"></span></a></li>
           <li class ="divider"></li>
          </ul>
        </div>
      </div>
    </div>
</header>

<div id ="wrapper">
<div id ="container" class="container-fluid">
 
    <div id = "layerGroupContainer">  
   <ul class="list-group" id="folderList">
	</ul>
   </div>      
  
    <div id= "map">
        <script type='text/javascript'>
       loadMap();
        </script>
    </div>
   
  </div>
  
  <div class = "searchContainer" id = "searchResults">
   	</div>
   	<div class="searchContainer" id ="searchBar">
 <form role="form">
 <div class="form-group">
   	<label for="addressSearch"> Search Address</label>
   	<input type="text" class ="form-control" id="address" placeholder="address"/>
	   	<button id="addressSearchButton" class="btn btn-default">search</button>
	   
  </div>
  </form>

</div>
</div>

        <script src="/public/javascripts/mapClicks.js" type="text/javascript"></script>


</body>
</html>